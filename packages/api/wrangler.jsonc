{
  "$schema": "node_modules/wrangler/config-schema.json",
  "name": "api",
  "main": "src/index.ts",
  "compatibility_flags": ["nodejs_compat"],
  "compatibility_date": "2025-05-08",
  "observability": {
    "enabled": true
  },
  "r2_buckets": [
    {
      "binding": "R2_FILE_TRANSFER_BUCKET",
      "bucket_name": "file-transfer",
      "experimental_remote": true
    },
    {
      "binding": "REPLICATOR_BUCKET",
      "bucket_name": "replicator",
      "experimental_remote": true
    }
  ],
  "vars": {
    "APP_URL": "http://localhost:5173",
    "R2_FILE_TRANSFER_BUCKET_NAME": "file-transfer",
    "R2_REPOS_BUCKET_NAME": "repos",
    "REPLICATOR_GIT_SYNC_API_URL": "http://localhost:8888",
    "TZ": "utc",
    "LANGSMITH_TRACING": "true",
    "LANGSMITH_ENDPOINT": "https://api.smith.langchain.com",
    "OTEL_ENABLED": "true"
  },
  "env": {
    "production": {
      "vars": {
        "APP_URL": "https://app.squash.build",
        "R2_FILE_TRANSFER_BUCKET_NAME": "file-transfer",
        "R2_REPOS_BUCKET_NAME": "repos",
        "REPLICATOR_GIT_SYNC_API_URL": "http://localhost:8888",
        "TZ": "utc",
        "LANGSMITH_TRACING": "true",
        "LANGSMITH_ENDPOINT": "https://api.smith.langchain.com",
        "OTEL_ENABLED": "true"
      }
    }
  },
  "rules": [{ "type": "Text", "globs": ["**/*.md"], "fallthrough": true }]
}
